BR2_aarch64=y
BR2_cortex_a72=y
BR2_ARM_FPU_VFPV4=y
BR2_TOOLCHAIN_EXTERNAL=y
BR2_TARGET_GENERIC_HOSTNAME="raspberrypi"
BR2_TARGET_GENERIC_ISSUE="Welcome to Abdul's Video Streamer"
BR2_SYSTEM_DHCP="eth0"

# Kernel Configuration
#BR2_LINUX_KERNEL=y
#BR2_LINUX_KERNEL_CUSTOM_VERSION=y
#BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE="6.1.21"
#BR2_LINUX_KERNEL_DEFCONFIG="bcm2711"
#BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG=y
#BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE="board/raspberrypi4/linux.config"

#Kernel
BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_6_1=y
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL_LOCATION="$(call github,raspberrypi,linux,17f135b742c4edb340afb365873c3a574f7e16cb)/linux-17f135b742c4edb340afb365873c3a574f7e16cb.tar.gz"
BR2_LINUX_KERNEL_DEFCONFIG="bcm2711"

# Device Tree
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_INTREE_DTS_NAME="broadcom/bcm2711-rpi-4-b"

BR2_LINUX_KERNEL_NEEDS_HOST_OPENSSL=y

BR2_PACKAGE_RPI_FIRMWARE=y
BR2_PACKAGE_RPI_FIRMWARE_VARIANT_PI4=y
BR2_PACKAGE_RPI_FIRMWARE_CONFIG_FILE="board/raspberrypi4-64/config_4_64bit.txt"

# Filesystem - Use ext4
BR2_TARGET_ROOTFS_EXT2=y
BR2_TARGET_ROOTFS_EXT2_4=y
BR2_TARGET_ROOTFS_EXT2_SIZE="512M" 
BR2_TARGET_ROOTFS_EXT2_LABEL="rootfs"

# Bootloader
#BR2_TARGET_UBOOT=y
#BR2_TARGET_UBOOT_BOARDNAME="raspberrypi4_64"
#BR2_TARGET_UBOOT_FORMAT_BIN=y
#BR2_TARGET_UBOOT_SPL=y
#BR2_TARGET_UBOOT_SPL_NAME="raspberrypi4_64"
#BR2_TARGET_UBOOT_CUSTOM_VERSION=y
#BR2_TARGET_UBOOT_CUSTOM_VERSION_VALUE="2023.04"

# Packages
BR2_PACKAGE_GST1_PLUGINS_BASE=y
BR2_PACKAGE_GST1_PLUGINS_GOOD=y
BR2_PACKAGE_GST1_PLUGINS_BAD=y
BR2_PACKAGE_GST1_PLUGINS_UGLY=y
BR2_PACKAGE_GSTREAMER1=y
BR2_PACKAGE_GST1_LIBAV=y
BR2_PACKAGE_V4L_UTILS=y

BR2_PACKAGE_OPENCV3=y 
BR2_PACKAGE_OPENCV_PYTHON=y
BR2_PACKAGE_OPENCV_FFMPEG=y
BR2_PACKAGE_OPENCV_GSTREAMER=y
BR2_PACKAGE_OPENCV_CONTRIB=y
BR2_PACKAGE_DROID=y
BR2_PACKAGE_OPENSSH=y

# Networking
BR2_PACKAGE_WPA_SUPPLICANT=y
BR2_PACKAGE_WIRELESS_REGDB=y
BR2_PACKAGE_IW=y
BR2_PACKAGE_WGET=y
BR2_PACKAGE_BASH=y      

# Other essentials
BR2_PACKAGE_PKGCONFIG=y
BR2_PACKAGE_NCURSES=y

# Custom Application
BR2_PACKAGE_MY_VIDEO_APP=y

# Init System - Use BusyBox
BR2_INIT_BUSYBOX=y

# --- Crucial for Overlay and BusyBox Config ---
BR2_ROOTFS_POST_BUILD_SCRIPT="board/raspberrypi4-64/post-build.sh"
BR2_ROOTFS_POST_IMAGE_SCRIPT="board/raspberrypi4-64/post-image.sh"
#BR2_PACKAGE_BUSYBOX_CONFIG_FRAGMENT_FILES="board/raspberrypi4/busybox.config"

# Target filesystem options
BR2_TARGET_GENERIC_ROOT_PASSWORD="root"
BR2_TARGET_GENERIC_GETTY_PORT="tty1"

# Build options for speed
BR2_JLEVEL=4
BR2_CCACHE=y

# Legal info
BR2_LEGAL_INFO=y